qemu-system-riscv64 -machine virt -bios none -kernel kernel/kernel -m 128M -smp 3 -nographic \
-global virtio-mmio.force-legacy=false \
-drive file=fs.img,if=none,format=raw,id=x0 \
-device virtio-blk-device,drive=x0,bus=virtio-mmio-bus.0 \
-netdev user,id=net0,hostfwd=udp::26999-:2000,hostfwd=udp::31999-:2001 \
-object filter-dump,id=net0,netdev=net0,file=packets.pcap \
-device e1000,netdev=net0,bus=pcie.0

xv6 kernel is booting

hart 1 starting
hart 2 starting
init: starting sh
$ nettest grade
txone: sending one packet
arp_rx: received an ARP packet
ip_rx: received an IP packet
ping0: starting
ping0: OK
ping1: starting
ping1: OK
ping2: starting
ping2: OK
ping3: starting
ping3: OK
dns: starting
DNS arecord for pdos.csail.mit.edu. is 128.52.129.126
dns: OK
free: OK